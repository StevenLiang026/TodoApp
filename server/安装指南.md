# TodoApp 服务器安装指南

## 前置要求

1. **安装 Node.js**
   - 访问 https://nodejs.org/
   - 下载并安装 LTS 版本 (推荐 18.x 或更高版本)
   - 验证安装：打开命令行输入 `node --version`

## 快速启动

### 方法一：使用批处理文件（推荐）
1. 双击运行 `start.bat` 文件
2. 脚本会自动检查环境并安装依赖
3. 服务器将在 http://localhost:3000 启动

### 方法二：手动启动
1. 打开命令行，进入 server 目录：
   ```bash
   cd TodoApp/server
   ```

2. 安装依赖：
   ```bash
   npm install
   ```

3. 启动服务器：
   ```bash
   npm start
   ```

## 验证服务器运行

访问 http://localhost:3000/api/health 应该看到：
```json
{
    "success": true,
    "message": "TodoApp 服务器运行正常",
    "timestamp": "2025-01-01T12:00:00.000Z"
}
```

## 测试 API

1. 使用 `test-api.http` 文件测试各个接口
2. 或使用 Postman 等工具测试
3. 首先注册用户，然后登录获取 token，最后使用 token 访问笔记接口

## 数据库

- 使用 SQLite 数据库
- 数据库文件：`todoapp.db`（首次运行时自动创建）
- 包含 users 和 todos 两个表

## 接口列表

| 方法 | 路径 | 说明 | 需要认证 |
|------|------|------|----------|
| POST | /api/register | 用户注册 | ❌ |
| POST | /api/login | 用户登录 | ❌ |
| GET | /api/health | 健康检查 | ❌ |
| POST | /api/todos | 新增笔记 | ✅ |
| GET | /api/todos | 查询笔记 | ✅ |
| PUT | /api/todos/:id | 更新笔记 | ✅ |
| DELETE | /api/todos/:id | 删除笔记 | ✅ |

## 常见问题

### Q: 端口被占用怎么办？
A: 修改 `server.js` 中的 PORT 变量，或设置环境变量 `PORT=其他端口号`

### Q: 如何重置数据库？
A: 删除 `todoapp.db` 文件，重启服务器会自动重新创建

### Q: 如何查看日志？
A: 服务器日志会直接显示在控制台中

## 生产环境部署

1. 设置环境变量：
   ```bash
   export NODE_ENV=production
   export JWT_SECRET=your_secure_secret_key
   export PORT=3000
   ```

2. 使用 PM2 等进程管理器：
   ```bash
   npm install -g pm2
   pm2 start server.js --name todoapp-server
   ```

3. 配置反向代理（如 Nginx）
4. 启用 HTTPS
5. 配置防火墙规则